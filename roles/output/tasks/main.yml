---
- name: Generate output document
  delegate_to: localhost
  delegate_facts: no
  become: false
  vars:
    tf: "{{ playbook_dir }}/tf/"
  template:
    src: "readme.j2"
    dest: "{{ playbook_dir }}/{{ output_file }}"

- name: Provisioned successfully
  delegate_to: localhost
  delegate_facts: no
  vars:
    extra_lines: "This information can also be found in {{ playbook_dir }}/{{ output_file }}"
    raw_lines: "{{ lookup('file', '{{ playbook_dir }}/{{ output_file }}') }}\n\n{{ extra_lines }}"
    padded_lines: |
      {% for line in raw_lines.split('\n') %}
      {{ "{:<80}".format(line) }}
      {% endfor %}
    output_lines: |
      {{ padded_lines }}
  debug:
    msg: "{{ output_lines.split('\n') }}"
